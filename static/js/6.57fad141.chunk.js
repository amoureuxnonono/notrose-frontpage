(this.webpackJsonpgrampuscommunity=this.webpackJsonpgrampuscommunity||[]).push([[6],{1073:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r}));var c=function(e){var t=e.numberOfDays,n=e.farmApr,c=e.tokenPrice,r=e.roundingDecimals,a=void 0===r?2:r,o=e.compoundFrequency,i=void 0===o?1:o,s=e.performanceFee,l=void 0===s?0:s,d=365*i,u=n/100;l&&(u=(n-n/100*l)/100);var b=t/365,j=1e3/c,x=j*Math.pow(1+u/d,d*b);return parseFloat((x-j).toFixed(a))},r=function(e){return e.amountEarned/e.amountInvested*100}},1090:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var c=n(30),r=n.n(c),a=n(8),o=function(e,t,n,c){var o=new r.a(t).times(c).times(a.BLOCKS_PER_YEAR),i=new r.a(e).times(n),s=o.div(i).times(100);return s.isNaN()||!s.isFinite()?null:s.toNumber()},i=function(e,t,n){var c=new r.a(e).times(n).times(a.BLOCKS_PER_YEAR).div(t).times(100);return c.isNaN()||!c.isFinite()?null:c.toNumber()}},1091:function(e,t,n){"use strict";var c,r,a=n(7),o=(n(1),n(4)),i=n(3),s=n(21),l=n(1073),d=n(0),u=o.default.div(c||(c=Object(a.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(4, auto);\n  margin-bottom: 24px;\n"]))),b=o.default.div(r||(r=Object(a.a)(["\n  margin-bottom: '10px';\n"])));t.a=function(e){var t=e.onDismiss,n=e.earnTokenPrice,c=e.apr,r=e.linkLabel,a=e.linkHref,o=e.earningTokenSymbol,j=e.roundingDecimals,x=void 0===j?2:j,O=e.compoundFrequency,m=void 0===O?1:O,p=e.performanceFee,h=void 0===p?0:p,f=Object(s.c)().t,k=1e3/n,g=Object(l.b)({numberOfDays:1,farmApr:c,tokenPrice:n,roundingDecimals:x,compoundFrequency:m,performanceFee:h}),v=Object(l.b)({numberOfDays:7,farmApr:c,tokenPrice:n,roundingDecimals:x,compoundFrequency:m,performanceFee:h}),y=Object(l.b)({numberOfDays:30,farmApr:c,tokenPrice:n,roundingDecimals:x,compoundFrequency:m,performanceFee:h}),w=Object(l.b)({numberOfDays:365,farmApr:c,tokenPrice:n,roundingDecimals:x,compoundFrequency:m,performanceFee:h});return Object(d.jsxs)(i.Modal,{title:"ROI",onDismiss:t,children:[Object(d.jsxs)(u,{children:[Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",mb:"20px",children:f("Timeframe")})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",mb:"20px",children:f("ROI")})}),Object(d.jsx)(b,{children:Object(d.jsxs)(i.Text,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",mb:"20px",children:[o," ",f("per")," $1000"]})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:"1d"})}),Object(d.jsx)(b,{children:Object(d.jsxs)(i.Text,{children:[Object(l.a)({amountEarned:g,amountInvested:k}).toFixed(x),"%"]})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:g})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:"7d"})}),Object(d.jsx)(b,{children:Object(d.jsxs)(i.Text,{children:[Object(l.a)({amountEarned:v,amountInvested:k}).toFixed(x),"%"]})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:v})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:"30d"})}),Object(d.jsx)(b,{children:Object(d.jsxs)(i.Text,{children:[Object(l.a)({amountEarned:y,amountInvested:k}).toFixed(x),"%"]})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:y})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:"365d(APY)"})}),Object(d.jsx)(b,{children:Object(d.jsxs)(i.Text,{children:[Object(l.a)({amountEarned:w,amountInvested:k}).toFixed(x),"%"]})}),Object(d.jsx)(b,{children:Object(d.jsx)(i.Text,{children:w})})]}),Object(d.jsxs)(i.Box,{mb:"28px",maxWidth:"280px",children:[Object(d.jsx)(i.Text,{fontSize:"12px",color:"textSubtle",children:f("Calculated based on current rates. Compounding %freq%x daily. Rates are estimates provided for your convenience only, and by no means represent guaranteed returns.",{freq:m.toLocaleString()})}),h>0&&Object(d.jsx)(i.Text,{mt:"14px",fontSize:"12px",color:"textSubtle",children:f("All estimated rates take into account this pool's %fee%% performance fee",{fee:h})})]}),Object(d.jsx)(i.Flex,{justifyContent:"center",children:Object(d.jsx)(i.LinkExternal,{href:a,children:r})})]})}},1278:function(e,t,n){"use strict";n.r(t);var c,r,a,o,i,s,l,d=n(1),u=n.n(d),b=n(266),j=n(62),x=n(10),O=n(394),m=n(87),p=n(21),h=n(30),f=n.n(h),k=n(23),g=n(3),v=n(246),y=n.n(v),w=n(535),S=n.n(w),T=n(326),F=n(327),I=n(8),C=n(167),B=n(51),D=n(1090),P=n(1073),E=n(322),A=n(1091),R=n(0),M=function(e){var t=e.pool,n=e.stakingTokenPrice,c=e.isAutoVault,r=void 0!==c&&c,a=e.compoundFrequency,o=void 0===a?1:a,i=e.performanceFee,s=void 0===i?0:i,l=Object(p.c)().t,d=t.stakingToken,u=t.earningToken,b=t.totalStaked,O=t.isFinished,m=t.tokenPerBlock,h=l(r?"APY includes compounding, APR doesn\u2019t. This pool\u2019s CAKE is compounded automatically, so we show APY.":"This pool\u2019s rewards aren\u2019t compounded automatically, so we show APR"),f=Object(g.useTooltip)(h,{placement:"bottom-end"}),k=f.targetRef,v=f.tooltip,y=f.tooltipVisible,w=Object(j.g)(u.address?u.address:""),S=Object(D.b)(n,w,Object(B.b)(b,d.decimals),parseFloat(m)),T=Math.round(w/1e3)>0,F=T?4:2,I=d.address&&"/#/swap?outputCurrency=".concat(d.address),C=Object(g.useModal)(Object(R.jsx)(A.a,{earnTokenPrice:w,apr:S,linkLabel:"".concat(l("Get")," ").concat(d.symbol),linkHref:I||"/#/swap",earningTokenSymbol:u.symbol,roundingDecimals:T?4:2,compoundFrequency:o,performanceFee:s})),M=Object(x.a)(C,1)[0];return Object(R.jsxs)(g.Flex,{alignItems:"center",justifyContent:"space-between",children:[y&&v,Object(R.jsxs)(g.TooltipText,{ref:k,children:[l(r?"APY":"APR"),":"]}),O||!S?Object(R.jsx)(g.Skeleton,{width:"82px",height:"32px"}):Object(R.jsxs)(g.Flex,{alignItems:"center",children:[Object(R.jsx)(E.a,{fontSize:"16px",isDisabled:O,value:function(){if(r){var e=1e3/w,t=Object(P.b)({numberOfDays:365,farmApr:S,tokenPrice:w,roundingDecimals:F,compoundFrequency:o,performanceFee:s});return Object(P.a)({amountEarned:t,amountInvested:e})}return S}(),decimals:2,unit:"%",bold:!0}),Object(R.jsx)(g.IconButton,{onClick:M,variant:"text",scale:"sm",children:Object(R.jsx)(g.CalculateIcon,{color:"textSubtle",width:"18px"})})]})]})},L=n(7),N=n(4),z=Object(N.keyframes)(c||(c=Object(L.a)(["\n  0% {\n    background-position: 50% 0%;\n  }\n  50% {\n    background-position: 50% 100%;\n  }\n  100% {\n    background-position: 50% 0%;\n  }\n"]))),H=Object(N.default)(g.Card)(r||(r=Object(L.a)(["\n  max-width: 352px;\n  margin: 0 8px 24px;\n  display: flex;\n  flex-direction: column;\n  align-self: baseline;\n  position: relative;\n  color: ",";\n  box-shadow: 0px 1px 4px rgba(25, 19, 38, 0.15);\n\n  ","\n\n  "," {\n    margin: 0 12px 46px;\n  }\n"])),(function(e){var t=e.isFinished;return e.theme.colors[t?"textDisabled":"secondary"]}),(function(e){var t=e.isPromotedPool,n=e.theme;return t?Object(N.css)(a||(a=Object(L.a)(["\n          background: linear-gradient(180deg, ",", ",");\n          padding: 1px 1px 3px 1px;\n          background-size: 400% 400%;\n          animation: "," 3s ease infinite;\n        "])),n.colors.primaryBright,n.colors.secondary,z):"background: ".concat((function(e){return e.theme.card.background}),";")}),(function(e){return e.theme.mediaQueries.sm})),V=Object(N.default)(g.Box)(o||(o=Object(L.a)(["\n  background: ",";\n  border-radius: ",";\n"])),(function(e){return e.theme.card.background}),(function(e){var t=e.isPromotedPool,n=e.theme;return t?"31px":n.radii.card})),_=n(389),G=Object(N.default)(g.Flex)(i||(i=Object(L.a)(["\n  svg {\n    height: 14px;\n    width: 14px;\n  }\n"]))),q=function(e){var t=e.pool,n=e.performanceFee,c=void 0===n?0:n,r=e.isAutoVault,a=void 0!==r&&r,o=e.totalCakeInVault,i=Object(p.c)().t,s=Object(j.b)().currentBlock,l=t.stakingToken,d=t.totalStaked,u=t.startBlock,b=t.endBlock,x=t.isFinished,O=Boolean(!x&&u&&b),m=Math.max(u-s,0),h=Math.max(b-s,0),f=0===m&&h>0,k=Object(g.useTooltip)(i("Subtracted automatically from each yield harvest and burned."),{placement:"bottom-end"}),v=k.targetRef,y=k.tooltip,w=k.tooltipVisible;return Object(R.jsxs)(G,{flexDirection:"column",children:[Object(R.jsxs)(g.Flex,{mb:"2px",justifyContent:"space-between",alignItems:"center",children:[Object(R.jsxs)(g.Text,{small:!0,children:[i("Total staked"),":"]}),Object(R.jsx)(g.Flex,{alignItems:"flex-start",children:d?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(E.a,{fontSize:"14px",decimals:0,value:a?Object(B.b)(o,l.decimals):Object(B.b)(d,l.decimals)}),Object(R.jsx)(g.Text,{ml:"4px",fontSize:"14px",children:l.symbol})]}):Object(R.jsx)(g.Skeleton,{width:"90px",height:"21px"})})]}),O&&Object(R.jsxs)(g.Flex,{mb:"2px",justifyContent:"space-between",alignItems:"center",children:[Object(R.jsxs)(g.Text,{small:!0,children:[i(f?"End":"Start"),":"]}),Object(R.jsxs)(g.Flex,{alignItems:"center",children:[h||m?Object(R.jsx)(E.a,{color:"primary",fontSize:"14px",value:f?h:m,decimals:0}):Object(R.jsx)(g.Skeleton,{width:"54px",height:"21px"}),Object(R.jsx)(g.Text,{ml:"4px",color:"primary",small:!0,children:i("blocks")}),Object(R.jsx)(g.TimerIcon,{ml:"4px",color:"primary"})]})]}),a&&Object(R.jsxs)(g.Flex,{mb:"2px",justifyContent:"space-between",alignItems:"center",children:[w&&y,Object(R.jsx)(g.TooltipText,{ref:v,small:!0,children:i("Performance Fee")}),Object(R.jsx)(g.Flex,{alignItems:"center",children:Object(R.jsxs)(g.Text,{ml:"4px",small:!0,children:[c/100,"%"]})})]})]})},Y=u.a.memo(q),U=Object(N.default)(g.Flex)(s||(s=Object(L.a)(["\n  align-items: center;\n  justify-content: space-between;\n  button {\n    padding: 0;\n  }\n"]))),K=function(e){var t=e.pool,n=e.account,c=e.performanceFee,r=void 0===c?0:c,a=e.isAutoVault,o=void 0!==a&&a,i=e.totalCakeInVault,s=Object(p.c)().t,l=Object(d.useState)(!1),u=Object(x.a)(l,2),b=u[0],j=u[1],O=s("You must harvest and compound your earnings from this pool manually."),m=s("Any funds you stake in this pool will be automagically harvested and restaked (compounded) for you."),h=Object(g.useTooltip)(o?m:O,{placement:"bottom-end"}),f=h.targetRef,k=h.tooltip,v=h.tooltipVisible;return Object(R.jsxs)(g.CardFooter,{children:[Object(R.jsxs)(U,{children:[Object(R.jsxs)(g.Flex,{alignItems:"center",children:[o?Object(R.jsx)(_.b,{}):Object(R.jsx)(_.d,{}),v&&k,Object(R.jsx)(g.Box,{ref:f,children:Object(R.jsx)(g.HelpIcon,{ml:"4px",width:"20px",height:"20px",color:"textSubtle"})})]}),Object(R.jsx)(g.ExpandableLabel,{expanded:b,onClick:function(){return j(!b)},children:s(b?"Hide":"Details")})]}),b&&Object(R.jsx)(Y,{pool:t,account:n,performanceFee:r,isAutoVault:o,totalCakeInVault:i})]})},W=Object(N.default)(g.CardHeader)(l||(l=Object(L.a)(["\n  background: ",";\n  border-radius: ",";\n"])),(function(e){var t=e.isFinished,n=e.background,c=e.theme;return t?c.colors.backgroundDisabled:c.colors.gradients[n]}),(function(e){var t=e.theme;return e.isPromotedPool?"31px 31px 0 0":"".concat(t.radii.card," ").concat(t.radii.card," 0 0")})),Z=function(e){var t=e.earningTokenSymbol,n=e.stakingTokenSymbol,c=e.isFinished,r=void 0!==c&&c,a=e.isAutoVault,o=void 0!==a&&a,i=e.isStaking,s=void 0!==i&&i,l=e.isPromotedPool,d=void 0!==l&&l,u=Object(p.c)().t,b="CAKE"===t&&"CAKE"===n,j=s?"bubblegum":"cardHeader";return Object(R.jsx)(W,{isPromotedPool:d,isFinished:r,background:j,children:Object(R.jsx)(g.Flex,{alignItems:"center",justifyContent:"space-between",children:Object(R.jsxs)(g.Flex,{flexDirection:"column",children:[Object(R.jsx)(g.Heading,{color:r?"textDisabled":"body",scale:"lg",children:"".concat("".concat(u(o?"Auto":b?"Manual":"Earn"))," ").concat(t)}),Object(R.jsx)(g.Text,{color:r?"textDisabled":"textSubtle",children:o?"".concat(u("Automatic restaking")):b?"".concat(u("Earn CAKE, stake CAKE")):"".concat(u("Stake")," ").concat(n)})]})})})},J=n(5),Q=n.n(J),X=n(19),$=n(39),ee=n(1040),te=n(173),ne=n(56),ce=n(43),re=n(32),ae=n(49),oe=n(55);var ie,se=n(124),le=function(e){var t=e.pool,n=e.isLoading,c=void 0!==n&&n,r=e.setNeedsApproval,a=t.syrupId,o=t.stakingToken,i=t.earningToken,s=t.isFinished,l=Object(p.c)().t,u=Object(d.useState)(!1),b=Object(x.a)(u,2),j=b[0],O=b[1],m=function(e,t,n){var c=Object(k.a)().account,r=Object(ne.b)(),a=Object(te.d)(t),o=Object(ae.l)(e.address),i=Object(d.useMemo)((function(){return[c,a]}),[c,a]),s=Object(oe.c)(o,"allowance",i).result,l=Object(d.useMemo)((function(){return[s?new f.a(s.toString()):void 0]}),[s]),u=Object(x.a)(l,1)[0],b=Object(d.useMemo)((function(){return e&&a&&u?u.gt(0)?$.a.APPROVED:$.a.NOT_APPROVED:$.a.UNKNOWN}),[e,a,u]),j=Object(d.useCallback)(Object(X.a)(Q.a.mark((function e(){var i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b===$.a.NOT_APPROVED){e.next=3;break}return console.error("approve was called unnecessarily"),e.abrupt("return");case 3:if(o){e.next=6;break}return console.error("tokenContract is null"),e.abrupt("return");case 6:if(a){e.next=9;break}return console.error("no spender"),e.abrupt("return");case 9:return e.next=11,o.estimateGas.approve(a,ee.a);case 11:i=e.sent,o.approve(a,ee.a,{gasLimit:Object(re.b)(i)}).then((function(){var e=setInterval(Object(X.a)(Q.a.mark((function a(){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r(Object(ce.B)(t,c)).then((function(){clearInterval(e),n()}));case 1:case"end":return a.stop()}}),a)}))),6e3)})).catch((function(e){throw console.error("Failed to approve token",e),e}));case 13:case"end":return e.stop()}}),e)}))),[b,o,a,r,t,c,n]);return[b,j]}(o,a,(function(){S("".concat(l("Contract Enabled")),"".concat(l("You can now stake in the ".concat(i.symbol," pool!")))),O(!1),r(!1)})),h=Object(x.a)(m,2),v=h[0],y=h[1],w=Object(se.a)(),S=w.toastSuccess,T=w.toastError,F=Object(d.useCallback)(Object(X.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,y();case 4:v===$.a.UNKNOWN?(T("".concat(l("Error")),"".concat(l("Please try again. Confirm the transaction and make sure you are paying enough gas!"))),O(!1)):v===$.a.APPROVED&&(S("".concat(l("Contract Enabled")),"".concat(l("You can now stake in the ".concat(i.symbol," pool!")))),O(!1),r(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),T("Error",null===e.t0||void 0===e.t0?void 0:e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[v,y,O,T,l,i,r,S]);return Object(R.jsx)(R.Fragment,{children:c?Object(R.jsx)(g.Skeleton,{width:"100%",height:"52px"}):Object(R.jsx)(g.Button,{isLoading:j,endIcon:j?Object(R.jsx)(g.AutoRenewIcon,{spin:!0,color:"currentColor"}):null,disabled:s||j,onClick:F,width:"100%",children:l("Enable")})})},de=n(251),ue=function(e){var t=e.tokenSymbol,n=e.onDismiss,c=Object(p.c)().t,r=Object(de.a)().theme;return Object(R.jsxs)(g.Modal,{title:"".concat(t," ").concat(c("required")),onDismiss:n,headerBackground:r.colors.gradients.cardHeader,children:[Object(R.jsx)(g.Text,{color:"failure",bold:!0,children:c("insufficientBalance",{name:t})}),Object(R.jsx)(g.Text,{mt:"24px",children:c("You\u2019ll need %tokensymbol% to stake in this pool!",{tokensymbol:t})}),Object(R.jsx)(g.Text,{children:c("Buy some %tokensymbol%, or make sure your %tokensymbol% isn\u2019t in another pool or LP.",{tokensymbol:t})}),Object(R.jsxs)(g.Button,{mt:"24px",as:"a",external:!0,href:"/#/swap",children:[c("Buy")," ",t]}),Object(R.jsx)(g.Button,{variant:"text",onClick:n,children:c("Close window")})]})};var be,je,xe=Object(N.default)(g.Button)(ie||(ie=Object(L.a)(["\n  flex-grow: 1;\n"]))),Oe=function(e){var t=e.children,n=e.onClick;return Object(R.jsx)(xe,{scale:"xs",mx:"2px",p:"4px 16px",variant:"tertiary",onClick:n,children:t})},me=Object(N.default)(g.Link)(be||(be=Object(L.a)(["\n  width: 100%;\n"]))),pe=function(e){var t=e.pool,n=e.stakingMax,c=e.stakingTokenPrice,r=e.isRemovingStake,a=void 0!==r&&r,o=e.onDismiss,i=t.syrupId,s=t.stakingToken,l=t.earningToken,u=Object(p.c)().t,b=Object(de.a)().theme,j=function(e,t){var n=Object(k.a)().account,c=Object(ne.b)(),r=Object(ae.k)(e);return[Object(d.useCallback)(function(){var a=Object(X.a)(Q.a.mark((function a(o){var i,s,l=arguments;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=l.length>1&&void 0!==l[1]?l[1]:18,r){a.next=4;break}return console.error("syrup pool contract is null"),a.abrupt("return");case 4:return a.next=6,r.estimateGas.deposit(new f.a(o).times(I.BIG_TEN.pow(i)).toString());case 6:s=a.sent,r.deposit(new f.a(o).times(I.BIG_TEN.pow(i)).toString(),{gasLimit:Object(re.b)(s)}).then((function(){var r=setInterval(Object(X.a)(Q.a.mark((function a(){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c(Object(ce.C)(e,n)).then((function(){clearInterval(r),t()}));case 1:case"end":return a.stop()}}),a)}))),6e3)})).catch((function(e){throw console.error("Failed to stake token",e),e}));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[r,c,e,n,t])]}(i,(function(){y("".concat(u("Staked"),"!"),u("Your ".concat(s.symbol," funds have been staked in the pool!"))),C(!1),o()})),O=Object(x.a)(j,1)[0],m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,c=Object(k.a)().account,r=Object(ne.b)(),a=Object(ae.k)(e);return[Object(d.useCallback)(function(){var o=Object(X.a)(Q.a.mark((function o(i){var s,l,d,u=arguments;return Q.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=u.length>1&&void 0!==u[1]?u[1]:18,a){o.next=4;break}return console.error("syrup pool contract is null"),o.abrupt("return");case 4:if(!t){o.next=11;break}return o.next=7,a.estimateGas.emergencyWithdraw();case 7:l=o.sent,a.emergencyWithdraw({gasLimit:Object(re.b)(l)}).then((function(){var t=setInterval(Object(X.a)(Q.a.mark((function a(){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r(Object(ce.C)(e,c)).then((function(){clearInterval(t),n()}));case 1:case"end":return a.stop()}}),a)}))),6e3)})).catch((function(e){throw console.error("Failed to approve token",e),e})),o.next=15;break;case 11:return o.next=13,a.estimateGas.withdraw(new f.a(i).times(I.BIG_TEN.pow(s)).toString());case 13:d=o.sent,a.withdraw(new f.a(i).times(I.BIG_TEN.pow(s)).toString(),{gasLimit:Object(re.b)(d)}).then((function(){var t=setInterval(Object(X.a)(Q.a.mark((function a(){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r(Object(ce.C)(e,c)).then((function(){clearInterval(t),n()}));case 1:case"end":return a.stop()}}),a)}))),6e3)})).catch((function(e){throw console.error("Failed to unstake token",e),e}));case 15:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),[a,r,e,c,n,t])]}(i,t.enableEmergencyWithdraw,(function(){y("".concat(u("Unstaked"),"!"),u("Your ".concat(l.symbol," earnings have also been harvested to your wallet!"))),C(!1),o()})),h=Object(x.a)(m,1)[0],v=Object(se.a)(),y=v.toastSuccess,w=v.toastError,S=Object(d.useState)(!1),T=Object(x.a)(S,2),F=T[0],C=T[1],D=Object(d.useState)(""),P=Object(x.a)(D,2),E=P[0],A=P[1],M=Object(d.useState)(0),L=Object(x.a)(M,2),N=L[0],z=L[1],H=E&&Object(B.a)(new f.a(E).times(c).toNumber()),V=function(e){if(e>0){var t=n.dividedBy(100).multipliedBy(e),c=Object(B.d)(t,s.decimals,s.decimals);A(c)}else A("");z(e)},_=function(){var e=Object(X.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),!a){e.next=13;break}return e.prev=2,e.next=5,h(E,s.decimals);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),w(u("Canceled"),u("Please try again and confirm the transaction.")),C(!1);case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,O(E,s.decimals);case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(13),w(u("Canceled"),u("Please try again and confirm the transaction.")),C(!1);case 22:case"end":return e.stop()}}),e,null,[[2,7],[13,18]])})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(g.Modal,{title:u(a?"Unstake":"Stake in Syrup Pool"),onDismiss:o,headerBackground:b.colors.gradients.cardHeader,children:[Object(R.jsxs)(g.Flex,{alignItems:"center",justifyContent:"space-between",mb:"8px",children:[Object(R.jsxs)(g.Text,{bold:!0,children:[u(a?"Unstake":"Stake"),":"]}),Object(R.jsxs)(g.Flex,{alignItems:"center",minWidth:"70px",children:[Object(R.jsx)(g.Image,{src:"/images/coins/".concat(Object(I.getENVChainId)(),"/").concat(s.address,".png"),width:24,height:24,alt:s.symbol}),Object(R.jsx)(g.Text,{ml:"4px",bold:!0,children:s.symbol})]})]}),Object(R.jsx)(g.BalanceInput,{value:E,onUserInput:function(e){if(e){var t=Object(B.c)(new f.a(e),s.decimals),c=Math.floor(t.dividedBy(n).multipliedBy(100).toNumber());z(Math.min(c,100))}else z(0);A(e)},currencyValue:"~".concat(H||0," USD")}),Object(R.jsxs)(g.Text,{mt:"8px",ml:"auto",color:"textSubtle",fontSize:"12px",mb:"8px",children:[u("Balance"),": ",Object(B.d)(n,s.decimals)]}),Object(R.jsx)(g.Slider,{min:0,max:100,value:N,onValueChanged:V,name:"stake",valueLabel:"".concat(N,"%"),step:1}),Object(R.jsxs)(g.Flex,{alignItems:"center",justifyContent:"space-between",mt:"8px",children:[Object(R.jsx)(Oe,{onClick:function(){return V(25)},children:"25%"}),Object(R.jsx)(Oe,{onClick:function(){return V(50)},children:"50%"}),Object(R.jsx)(Oe,{onClick:function(){return V(75)},children:"75%"}),Object(R.jsx)(Oe,{onClick:function(){return V(100)},children:"MAX"})]}),Object(R.jsx)(g.Button,{isLoading:F,endIcon:F?Object(R.jsx)(g.AutoRenewIcon,{spin:!0,color:"currentColor"}):null,onClick:_,disabled:!E||0===parseFloat(E),mt:"24px",children:u(F?"Confirming":"Confirm")}),!a&&Object(R.jsx)(me,{external:!0,href:"/#/swap",children:Object(R.jsx)(g.Button,{width:"100%",mt:"8px",variant:"secondary",children:u("getLP",{name:s.symbol})})})]})},he=Object(N.default)(E.a)(je||(je=Object(L.a)(["\n  display: inline;\n"]))),fe=function(e){var t=e.pool,n=e.stakingTokenBalance,c=e.stakingTokenPrice,r=e.stakedBalance,a=e.isStaked,o=e.isLoading,i=void 0!==o&&o,s=t.stakingToken,l=t.earningToken,d=t.stakingLimit,u=t.isFinished,b=Object(p.c)().t,j=Object(B.c)(new f.a(d),l.decimals),O=d&&n.isGreaterThan(j)?j:n,m=Object(B.b)(r,s.decimals),h=Object(B.b)(r.multipliedBy(c),s.decimals),k=Object(g.useModal)(Object(R.jsx)(ue,{tokenSymbol:s.symbol})),v=Object(x.a)(k,1)[0],y=Object(g.useModal)(Object(R.jsx)(pe,{stakingMax:O,pool:t,stakingTokenPrice:c})),w=Object(x.a)(y,1)[0],S=Object(g.useModal)(Object(R.jsx)(pe,{stakingMax:r,pool:t,stakingTokenPrice:c,isRemovingStake:!0})),T=Object(x.a)(S,1)[0];return Object(R.jsx)(g.Flex,{flexDirection:"column",children:i?Object(R.jsx)(g.Skeleton,{width:"100%",height:"52px"}):a?Object(R.jsxs)(g.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(R.jsx)(g.Flex,{flexDirection:"column",children:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(E.a,{bold:!0,fontSize:"20px",decimals:3,value:m}),Object(R.jsxs)(g.Text,{fontSize:"12px",color:"textSubtle",children:["~",Object(R.jsx)(he,{fontSize:"12px",color:"textSubtle",decimals:2,value:h,unit:" USD"})]})]})}),Object(R.jsxs)(g.Flex,{children:[Object(R.jsx)(g.IconButton,{variant:"secondary",onClick:T,mr:"6px",children:Object(R.jsx)(g.MinusIcon,{color:"primary",width:"24px"})}),Object(R.jsx)(g.IconButton,{variant:"secondary",onClick:n.gt(0)?w:v,disabled:u,children:Object(R.jsx)(g.AddIcon,{color:"primary",width:"24px",height:"24px"})})]})]}):Object(R.jsx)(g.Button,{disabled:u,onClick:n.gt(0)?w:v,children:b("Stake")})})};var ke,ge,ve=function(e){var t=e.formattedBalance,n=e.earningToken,c=e.earningsDollarValue,r=e.syrupId,a=e.onDismiss,o=Object(p.c)().t,i=Object(de.a)().theme,s=Object(se.a)(),l=s.toastSuccess,u=s.toastError,b=function(e,t){var n=Object(k.a)().account,c=Object(ne.b)(),r=Object(ae.k)(e);return[Object(d.useCallback)(Object(X.a)(Q.a.mark((function a(){var o;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=3;break}return console.error("syrup pool contract is null"),a.abrupt("return");case 3:return a.next=5,r.estimateGas.getReward();case 5:o=a.sent,r.getReward({gasLimit:Object(re.b)(o)}).then((function(){var r=setInterval(Object(X.a)(Q.a.mark((function a(){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c(Object(ce.C)(e,n)).then((function(){clearInterval(r),t()}));case 1:case"end":return a.stop()}}),a)}))),6e3)})).catch((function(e){throw console.error("Failed to harvest token",e),e}));case 7:case"end":return a.stop()}}),a)}))),[r,c,e,n,t])]}(r,(function(){l("".concat(o("Harvested"),"!"),o("Your ".concat(n.symbol," earnings have been sent to your wallet!"))),f(!1),a()})),j=Object(x.a)(b,1)[0],O=Object(d.useState)(!1),m=Object(x.a)(O,2),h=m[0],f=m[1],v=function(){var e=Object(X.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,j();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),u(o("Canceled"),o("Please try again and confirm the transaction.")),f(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(g.Modal,{title:"".concat(n.symbol," ").concat(o("Harvest")),onDismiss:a,headerBackground:i.colors.gradients.cardHeader,children:[Object(R.jsxs)(g.Flex,{justifyContent:"space-between",alignItems:"center",mb:"24px",children:[Object(R.jsxs)(g.Text,{children:[o("Harvesting"),":"]}),Object(R.jsxs)(g.Flex,{flexDirection:"column",children:[Object(R.jsxs)(g.Heading,{children:[t," ",n.symbol]}),Object(R.jsx)(g.Text,{fontSize:"12px",color:"textSubtle",children:"~".concat(c||0," USD")})]})]}),Object(R.jsx)(g.Button,{mt:"8px",onClick:v,isLoading:h,endIcon:h?Object(R.jsx)(g.AutoRenewIcon,{spin:!0,color:"currentColor"}):null,children:o(h?"Confirming":"Confirm")}),Object(R.jsx)(g.Button,{variant:"text",onClick:a,pb:"0px",children:o("Close window")})]})},ye=Object(N.default)(E.a)(ke||(ke=Object(L.a)(["\n  display: inline;\n"]))),we=function(e){var t=e.earnings,n=e.earningToken,c=e.syrupId,r=e.isLoading,a=void 0!==r&&r,o=Object(p.c)().t,i=Object(j.g)(n.address?n.address:""),s=Object(B.b)(t,n.decimals),l=Object(B.b)(t.multipliedBy(i),n.decimals),d=Object(B.d)(t,n.decimals),u=Object(B.a)(s,3,3),b=Object(B.a)(l),O=t.toNumber()>0,m=Object(g.useModal)(Object(R.jsx)(ve,{formattedBalance:u,fullBalance:d,earningToken:n,earningsDollarValue:b,syrupId:c})),h=Object(x.a)(m,1)[0];return Object(R.jsx)(g.Flex,{flexDirection:"column",mb:"16px",children:Object(R.jsxs)(g.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(R.jsx)(g.Flex,{flexDirection:"column",children:a?Object(R.jsx)(g.Skeleton,{width:"80px",height:"48px"}):Object(R.jsxs)(R.Fragment,{children:[O?Object(R.jsx)(E.a,{bold:!0,fontSize:"20px",decimals:5,value:s}):Object(R.jsx)(g.Heading,{color:"textDisabled",children:"0"}),Object(R.jsxs)(g.Text,{fontSize:"12px",color:O?"textSubtle":"textDisabled",children:["~",O?Object(R.jsx)(ye,{fontSize:"12px",color:"textSubtle",decimals:2,value:l,unit:" USD"}):"0 USD"]})]})}),Object(R.jsx)(g.Flex,{children:Object(R.jsx)(g.Button,{disabled:!O,onClick:h,children:o("Harvest")})})]})})},Se=Object(N.default)(g.Text)(ge||(ge=Object(L.a)(["\n  display: inline;\n"]))),Te=function(e){var t=e.pool,n=e.stakedBalance,c=e.stakingTokenPrice,r=t.syrupId,a=t.stakingToken,o=t.earningToken,i=t.harvest,s=t.userData,l=Object(p.c)().t,u=(null===s||void 0===s?void 0:s.stakingTokenBalance)?new f.a(s.stakingTokenBalance):I.BIG_ZERO,b=(null===s||void 0===s?void 0:s.allowance)?new f.a(s.allowance):I.BIG_ZERO,j=(null===s||void 0===s?void 0:s.pendingReward)?new f.a(s.pendingReward):I.BIG_ZERO,O=!b.gt(0),m=Object(d.useState)(O),h=Object(x.a)(m,2),k=h[0],v=h[1];k!==O&&v(O);var y=n.gt(0),w=!s;return Object(R.jsx)(g.Flex,{flexDirection:"column",children:Object(R.jsxs)(g.Flex,{flexDirection:"column",children:[i&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(g.Box,{display:"inline",children:[Object(R.jsx)(Se,{color:"secondary",textTransform:"uppercase",bold:!0,fontSize:"12px",children:"".concat(o.symbol," ")}),Object(R.jsx)(Se,{color:"textSubtle",textTransform:"uppercase",bold:!0,fontSize:"12px",children:l("Earned")})]}),Object(R.jsx)(we,{earnings:j,earningToken:o,syrupId:r,isLoading:w})]}),Object(R.jsxs)(g.Box,{display:"inline",children:[Object(R.jsxs)(Se,{color:y?"secondary":"textSubtle",textTransform:"uppercase",bold:!0,fontSize:"12px",children:[y?a.symbol:l("Stake")," "]}),Object(R.jsx)(Se,{color:y?"textSubtle":"secondary",textTransform:"uppercase",bold:!0,fontSize:"12px",children:y?l("Staked"):"".concat(a.symbol)})]}),k?Object(R.jsx)(le,{pool:t,isLoading:w,setNeedsApproval:v}):Object(R.jsx)(fe,{isLoading:w,pool:t,stakingTokenBalance:u,stakingTokenPrice:c,stakedBalance:n,isStaked:y})]})})},Fe=function(e){var t=e.pool,n=e.account,c=t.syrupId,r=t.stakingToken,a=t.earningToken,o=t.isFinished,i=t.userData,s=Object(p.c)().t,l=(null===i||void 0===i?void 0:i.stakedBalance)?new f.a(i.stakedBalance):I.BIG_ZERO,d=l.gt(0),u=Object(j.g)(r.address?r.address:"");return Object(R.jsx)(H,{isFinished:o&&0!==c,ribbon:o&&Object(R.jsx)(g.CardRibbon,{variantColor:"textDisabled",text:"".concat(s("Finished"))}),children:Object(R.jsxs)(V,{children:[Object(R.jsx)(Z,{isStaking:d,earningTokenSymbol:a.symbol,stakingTokenSymbol:r.symbol,isFinished:o&&0!==c}),Object(R.jsxs)(g.CardBody,{children:[Object(R.jsx)(M,{pool:t,stakingTokenPrice:u}),Object(R.jsx)(g.Flex,{mt:"24px",flexDirection:"column",children:n?Object(R.jsx)(Te,{pool:t,stakedBalance:l,stakingTokenPrice:u}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g.Text,{mb:"10px",textTransform:"uppercase",fontSize:"12px",color:"textSubtle",bold:!0,children:s("Start Earning")}),Object(R.jsx)(C.a,{})]})})]}),Object(R.jsx)(K,{pool:t,account:n})]})})},Ie=function(e){var t=e.showHistory,n=e.setShowHistory,c=e.stakedOnly,r=e.setStakedOnly,a=e.hasStakeInFinishedPools,o=Object(p.c)().t;return Object(R.jsx)(g.Flex,{alignItems:"center",justifyContent:"center",mb:"32px",children:Object(R.jsxs)(g.Flex,{alignItems:"center",flexDirection:["column",null,"row",null],children:[Object(R.jsxs)(g.ButtonMenu,{activeIndex:t?1:0,onItemClick:function(e){return n(1===e)},scale:"sm",variant:"subtle",children:[Object(R.jsx)(g.ButtonMenuItem,{children:o("Live")}),Object(R.jsx)(g.NotificationDot,{show:a,children:Object(R.jsx)(g.ButtonMenuItem,{children:o("Finished")})})]}),Object(R.jsxs)(g.Flex,{mt:["4px",null,0,null],ml:[0,null,"24px",null],justifyContent:"center",alignItems:"center",children:[Object(R.jsx)(g.Toggle,{scale:"sm",checked:c,onChange:function(){return r((function(e){return!e}))}}),Object(R.jsx)(g.Text,{ml:"8px",children:o("Staked only")})]})]})})},Ce=function(){var e=Object(p.c)().t,t=Object(k.a)().account,n=Object(j.q)(t),c=Object(j.b)().currentBlock,r=Object(T.a)(!1,"grampus_syrup_pool_staked"),a=Object(x.a)(r,2),o=a[0],i=a[1],s=Object(T.a)(!0,"grampus_syrup_pool_history"),l=Object(x.a)(s,2),u=l[0],b=l[1],h=Object(d.useMemo)((function(){return S()(n,(function(e){return e.isFinished||c>e.endBlock&&e.endBlock>0}))}),[c,n]),v=Object(x.a)(h,2),w=v[0],I=v[1],C=Object(d.useMemo)((function(){return w.filter((function(e){return e.userData&&new f.a(e.userData.stakedBalance).isGreaterThan(0)}))}),[w]),B=Object(d.useMemo)((function(){return I.filter((function(e){return e.userData&&new f.a(e.userData.stakedBalance).isGreaterThan(0)}))}),[I]),D=C.length>0;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(O.a,{children:Object(R.jsx)(g.Flex,{justifyContent:"space-between",flexDirection:["column",null,"row"],children:Object(R.jsxs)(g.Flex,{flexDirection:"column",mr:["8px",0],children:[Object(R.jsx)(g.Heading,{as:"h1",scale:"xxl",color:"secondary",mb:"24px",children:e("Stake Pools")}),Object(R.jsx)(g.Heading,{scale:"md",color:"text",children:e("Stake some tokens to earn new tokens")})]})})}),Object(R.jsxs)(m.a,{children:[Object(R.jsx)(Ie,{showHistory:u,setShowHistory:b,stakedOnly:o,setStakedOnly:i,hasStakeInFinishedPools:D}),u?Object(R.jsx)(F.a,{children:Object(R.jsx)(R.Fragment,{children:o?y()(C,["sortOrder"]).map((function(e){return Object(R.jsx)(Fe,{pool:e,account:t},e.syrupId)})):y()(w,["sortOrder"]).map((function(e){return Object(R.jsx)(Fe,{pool:e,account:t},e.syrupId)}))})}):Object(R.jsx)(F.a,{children:Object(R.jsx)(R.Fragment,{children:o?y()(B,["sortOrder"]).map((function(e){return Object(R.jsx)(Fe,{pool:e,account:t},e.syrupId)})):y()(I,["sortOrder"]).map((function(e){return Object(R.jsx)(Fe,{pool:e,account:t},e.syrupId)}))})})]})]})},Be=function(){return Object(j.f)(),Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(Ce,{})})};t.default=function(){return Object(R.jsx)(b.b,{children:Object(R.jsx)(Be,{})})}}}]);
//# sourceMappingURL=6.57fad141.chunk.js.map